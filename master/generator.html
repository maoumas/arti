<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Teleprompter para Arti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        textarea { width: 100%; height: 300px; padding: 10px; border: 2px solid #ccc; border-radius: 5px; font-size: 16px; margin-bottom: 20px; }
        button { background: #10B981; color: white; font-weight: bold; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; font-size: 18px; transition: 0.3s; }
        button:hover { background: #059669; }
        .instructions { background: #e0f2fe; padding: 15px; border-left: 5px solid #3b82f6; margin-bottom: 20px; }
        code { background: #ddd; padding: 2px 5px; border-radius: 3px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1 class="text-2xl font-bold mb-4 text-gray-800">Generador M√°gico para Arti ü™Ñ</h1>
    
    <div class="instructions">
        <p class="font-bold">C√≥mo escribir tu guion aqu√≠:</p>
        <ul class="list-disc pl-5 mt-2 space-y-1">
            <li>Escribe normal para el <b>texto del presentador</b>.</li>
            <li>Pon un <code>#</code> al principio de la l√≠nea para un <b>T√çTULO</b> (Ej: <code># NOTICIAS DE HOY</code>).</li>
            <li>Pon un <code>*</code> al principio de la l√≠nea para una <b>NOTA DE REGIE</b> (Ej: <code>* Poner m√∫sica triste</code>).</li>
            <li>Deja una l√≠nea vac√≠a entre p√°rrafos.</li>
        </ul>
    </div>

    <h3 class="font-bold mb-2">1. Pega tu texto aqu√≠:</h3>
    <textarea id="inputText" placeholder="# T√çTULO DEL PROGRAMA

* M√∫sica de intro

Hola a todos, bienvenidos al programa de hoy.
Este es el texto que leer√© en el teleprompter.

# SECCI√ìN 1

Aqu√≠ seguimos con m√°s noticias..."></textarea>

    <div class="flex gap-4">
        <button onclick="generateAndDownload()">2. ¬°DESCARGAR TELEPROMPTER!</button>
    </div>
</div>

<script>
    // Aqu√≠ guardamos la plantilla maestra (Master Template 2025) como un string gigante
    const htmlTop = `<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta property="og:title" content="Teleprompter Arti" /><meta property="og:description" content="Auto-start" />
<meta property="og:image" content="https://lh3.googleusercontent.com/u/0/d/1Q4R9E2_Z9Z9Z9Z9Z9Z9Z9Z9Z9Z9Z9Z9=w1200-h630-p-k-nu" />
<title>Teleprompter</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
body { background-color: #000; color: #f0f0f0; font-family: 'Inter', sans-serif; }
#controls { position: sticky; bottom: 0; left: 0; right: 0; background-color: #111; border-top: 1px solid #333; padding: 8px 4px; display: flex; flex-wrap: nowrap; justify-content: space-between; align-items: center; gap: 4px; z-index: 1000; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.btn-main { height: 44px; padding: 0 12px; border-radius: 8px; font-weight: 700; text-transform: uppercase; cursor: pointer; border: none; color: white; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0; white-space: nowrap; }
#play-pause-btn { background-color: #10B981; min-width: 80px; transition: background-color 0.3s; } 
#play-pause-btn.paused { background-color: #EF4444; } 
#reset-btn { background-color: #374151; width: 44px; padding: 0; }
.control-group { display: flex; align-items: center; gap: 1px; background-color: #222; padding: 2px; border-radius: 8px; border: 1px solid #444; flex-shrink: 0; }
.group-icon { padding: 0 6px; display: flex; align-items: center; justify-content: center; color: #888; }
.material-icons { font-size: 20px; }
.stepper-btn { width: 40px; height: 40px; border-radius: 6px; border: none; font-size: 1.4rem; line-height: 1; font-weight: bold; cursor: pointer; color: white; display: flex; justify-content: center; align-items: center; transition: background 0.1s; }
.value-display { font-family: monospace; font-size: 1.1rem; font-weight: bold; min-width: 24px; text-align: center; color: #fff; user-select: none; }
.theme-speed .stepper-btn { background-color: #1E40AF; } .theme-speed .stepper-btn:active { background-color: #3B82F6; } .theme-speed .group-icon { color: #60A5FA; }
.theme-font .stepper-btn { background-color: #92400E; } .theme-font .stepper-btn:active { background-color: #F59E0B; } .theme-font .group-icon { color: #FBBF24; }
.toggle-container { display: none; } 
@media (min-width: 768px) { #controls { justify-content: center; gap: 1.5rem; padding: 1rem; } .toggle-container { display: flex; align-items: center; gap: 0.5rem; color: #888; font-size: 0.8rem; margin-left: 10px;} .btn-main { font-size: 1rem; padding: 0 20px; } }
#script-container { padding: 1rem 1.5rem; padding-bottom: 70vh; max-width: 900px; margin: 0 auto; line-height: 1.5; }
.speaker-text { font-size: 2.5rem; font-weight: 600; color: #ffffff; margin-bottom: 1.5rem; transition: font-size 0.1s; }
.instruction { font-size: 1.2rem; color: #FCD34D; font-style: italic; background-color: #282518; border-left: 4px solid #F59E0B; padding: 1rem; margin-bottom: 1.5rem; border-radius: 0 8px 8px 0; opacity: 0.9; }
.timestamp { font-size: 1.5rem; font-weight: 700; color: #60A5FA; border-top: 1px solid #333; padding-top: 2rem; margin-top: 3rem; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 1px; }
body.hide-instructions .instruction { display: none; }
</style>
</head>
<body class="">
<div id="script-container"></div>
<div id="controls">
<div style="display:flex; gap:4px; flex-shrink:0;"><button id="play-pause-btn" class="btn-main">INICIO</button><button id="reset-btn" class="btn-main"><span class="material-icons" style="font-size:24px;">replay</span></button></div>
<div class="control-group theme-speed"><div class="group-icon"><span class="material-icons">bolt</span></div><button class="stepper-btn" id="speed-minus">‚àí</button><div class="value-display" id="speed-display">3</div><button class="stepper-btn" id="speed-plus">+</button></div>
<div class="control-group theme-font"><div class="group-icon"><span class="material-icons">text_fields</span></div><button class="stepper-btn" id="font-minus">‚àí</button><div class="value-display" id="font-display">3</div><button class="stepper-btn" id="font-plus">+</button></div>
<div class="toggle-container"><input type="checkbox" id="toggle-instructions"> <label for="toggle-instructions">Ocultar notas</label></div>
</div>
<script type="module">
const scriptData = [`;

    const htmlBottom = `
];
document.addEventListener('DOMContentLoaded', () => {
  const scriptContainer = document.getElementById('script-container');
  scriptData.forEach(item => {
      let el;
      if (item.type === 'title') { el = document.createElement('h2'); el.className = 'timestamp'; } 
      else if (item.type === 'instruction') { el = document.createElement('p'); el.className = 'instruction'; } 
      else { el = document.createElement('p'); el.className = 'speaker-text'; }
      el.textContent = item.content; scriptContainer.appendChild(el);
  });
  let state = { speedLevel: 3, fontLevel: 3, isScrolling: false };
  let animationFrameId = null;
  const btnPlay = document.getElementById('play-pause-btn'); const btnReset = document.getElementById('reset-btn'); const toggleInstr = document.getElementById('toggle-instructions');
  const btnSpeedMinus = document.getElementById('speed-minus'); const btnSpeedPlus = document.getElementById('speed-plus'); const dispSpeed = document.getElementById('speed-display');
  const btnFontMinus = document.getElementById('font-minus'); const btnFontPlus = document.getElementById('font-plus'); const dispFont = document.getElementById('font-display');
  function updateFont() { const baseSize = 24; const stepSize = 7; const pixelSize = baseSize + (state.fontLevel * stepSize); document.querySelectorAll('.speaker-text, .timestamp').forEach(el => { el.style.fontSize = pixelSize + 'px'; }); dispFont.textContent = state.fontLevel; }
  function getScrollPixelPerFrame() { const val = state.speedLevel; if (val === 0) return 0; return (val * 5 + Math.pow(val, 2)) / 60; }
  function updateSpeedDisplay() { dispSpeed.textContent = state.speedLevel; }
  function loop() { if (!state.isScrolling) return; const pixels = getScrollPixelPerFrame(); if (pixels > 0) { window.scrollBy(0, pixels); } animationFrameId = requestAnimationFrame(loop); }
  function togglePlay() { state.isScrolling = !state.isScrolling; if (state.isScrolling) { btnPlay.textContent = "PAUSA"; btnPlay.classList.add('paused'); loop(); } else { btnPlay.textContent = "INICIO"; btnPlay.classList.remove('paused'); cancelAnimationFrame(animationFrameId); } }
  btnSpeedMinus.addEventListener('click', () => { if (state.speedLevel > 0) { state.speedLevel--; updateSpeedDisplay(); } });
  btnSpeedPlus.addEventListener('click', () => { if (state.speedLevel < 20) { state.speedLevel++; updateSpeedDisplay(); } });
  btnFontMinus.addEventListener('click', () => { if (state.fontLevel > 0) { state.fontLevel--; updateFont(); } });
  btnFontPlus.addEventListener('click', () => { if (state.fontLevel < 15) { state.fontLevel++; updateFont(); } });
  btnPlay.addEventListener('click', togglePlay);
  btnReset.addEventListener('click', () => { window.scrollTo(0, 0); state.isScrolling = false; btnPlay.textContent = "INICIO"; btnPlay.classList.remove('paused'); cancelAnimationFrame(animationFrameId); });
  document.addEventListener('keydown', (e) => { if (e.key === ' ') { e.preventDefault(); togglePlay(); } });
  toggleInstr.addEventListener('change', (e) => { document.body.classList.toggle('hide-instructions', e.target.checked); });
  updateFont(); updateSpeedDisplay();
  setTimeout(() => { if (!state.isScrolling) { togglePlay(); } }, 2000);
});
<\/script></body></html>`;

    function generateAndDownload() {
        const rawText = document.getElementById('inputText').value;
        const lines = rawText.split('\n');
        let scriptJson = "";

        lines.forEach(line => {
            line = line.trim();
            if (!line) return; // Ignorar l√≠neas vac√≠as

            if (line.startsWith('#')) {
                // Es un t√≠tulo
                let content = line.substring(1).trim();
                scriptJson += `{ type: "title", content: "${escapeStr(content)}" },\n`;
            } else if (line.startsWith('*')) {
                // Es una instrucci√≥n
                let content = line.substring(1).trim();
                scriptJson += `{ type: "instruction", content: "${escapeStr(content)}" },\n`;
            } else {
                // Es texto normal
                scriptJson += `{ type: "text", content: "${escapeStr(line)}" },\n`;
            }
        });

        // Combinar todo
        const fullHtml = htmlTop + scriptJson + htmlBottom;

        // Crear Blob y descargar
        const blob = new Blob([fullHtml], { type: 'text/html' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        
        // Nombre del archivo con fecha
        const date = new Date();
        const dateStr = date.getFullYear() + "-" + (date.getMonth()+1) + "-" + date.getDate();
        link.download = `teleprompter-${dateStr}.html`;
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    function escapeStr(str) {
        // Escapar comillas dobles para no romper el JSON
        return str.replace(/"/g, '\\"');
    }
</script>

</body>
</html>
