<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador de Teleprompter para Arti</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #f3f4f6;
      color: #1f2937;
      padding: 20px;
      padding-bottom: 120px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
    }
    .instructions {
      background: #e0f2fe;
      padding: 15px;
      border-left: 5px solid #3b82f6;
      margin-bottom: 20px;
      color: #1e3a8a;
    }
    .instructions code {
      background: #bfdbfe;
      color: #1e3a8a;
      padding: 2px 5px;
      border-radius: 3px;
      font-weight: bold;
    }
    textarea {
      width: 100%;
      height: 300px;
      padding: 10px;
      border: 2px solid #9ca3af;
      border-radius: 5px;
      font-size: 16px;
      margin-bottom: 20px;
      background-color: #ffffff !important;
      color: #000000 !important;
    }
    .bottom-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      padding: 15px;
      box-shadow: 0 -4px 15px rgba(0,0,0,0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      border-top: 1px solid #e5e7eb;
    }
    button {
      background: #10B981;
      color: white;
      font-weight: bold;
      padding: 15px 30px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 18px;
      transition: 0.3s;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    button:hover {
      background: #059669;
      transform: translateY(-2px);
    }
    button:active {
      transform: translateY(0);
    }
    #generation-message {
      display: none;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #3B82F6;
      color: white;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: bold;
      z-index: 10000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

<div id="generation-message">procesando archivo... por favor espere.</div>

<div class="container">
  <h1 class="text-2xl font-bold mb-4">Generador M√°gico para Arti ü™Ñ (Versi√≥n Alemana)</h1>

  <div class="instructions">
    <p class="font-bold">C√≥mo usar esto:</p>
    <ul class="list-disc pl-5 mt-2">
      <li>Pega tu guion en el cuadro grande de abajo.</li>
      <li><code>#</code> al principio indica un <b>T√çTULO AZUL</b>.</li>
      <li><code>*</code> indica una <b>NOTA AMARILLA</b>.</li>
      <li>Todo lo dem√°s es texto normal.</li>
    </ul>
  </div>

  <h3 class="font-bold mb-2 text-lg">Pega tu texto aqu√≠:</h3>
  <textarea id="inputText" placeholder="# TITEL DES PROGRAMMS
* Kurze Pause f√ºr Applaus
Guten Abend, meine Damen und Herren.
# N√ÑCHSTER ABSCHNITT
Hier geht es weiter..."></textarea>
</div>

<div class="bottom-bar">
  <button onclick="generateAndDownload()">2. ¬°GENERIEREN & HERUNTERLADEN!</button>
</div>

<script>
  const htmlTop = `<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Teleprompter</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
body { background-color: #000; color: #f0f0f0; font-family: 'Inter', sans-serif; }
#controls { position: sticky; bottom: 0; background: #111; border-top: 1px solid #333; padding: 8px 4px; display: flex; justify-content: space-between; gap: 4px; z-index: 1000; }
.btn-main { height: 44px; padding: 0 12px; border-radius: 8px; font-weight: 700; cursor: pointer; border: none; color: white; font-size: 0.9rem; }
#play-pause-btn { background-color: #10B981; }
#play-pause-btn.paused { background-color: #EF4444; }
#script-container { padding: 2rem; padding-bottom: 70vh; max-width: 900px; margin: 0 auto; line-height: 1.5; }
.speaker-text { font-size: 2.5rem; font-weight: 600; color: #fff; margin-bottom: 1.5rem; }
.instruction { font-size: 1.2rem; color: #FCD34D; background: #282518; padding: 1rem; border-left: 4px solid #F59E0B; margin-bottom: 1.5rem; }
.timestamp { font-size: 1.5rem; font-weight: 700; color: #60A5FA; border-top: 1px solid #333; padding-top: 2rem; margin-top: 3rem; margin-bottom: 1rem; }
</style>
</head>
<body><div id="script-container"></div><div id="controls">
<button id="play-pause-btn" class="btn-main">START</button>
<button onclick="window.scrollTo(0,0)" class="btn-main">TOP</button></div>
<script type="module">const scriptData = [`;

  const htmlBottom = `];
const scriptContainer = document.getElementById('script-container');
scriptData.forEach(item => {
  let el = document.createElement('p');
  if (item.type === 'title') { el.className = 'timestamp'; }
  else if (item.type === 'instruction') { el.className = 'instruction'; }
  else { el.className = 'speaker-text'; }
  el.textContent = item.content;
  scriptContainer.appendChild(el);
});
let scrolling = false;
function scrollStep() {
  if (!scrolling) return;
  window.scrollBy(0, 1.5);
  requestAnimationFrame(scrollStep);
}
document.getElementById('play-pause-btn').addEventListener('click', () => {
  scrolling = !scrolling;
  const btn = document.getElementById('play-pause-btn');
  btn.textContent = scrolling ? 'PAUSA' : 'START';
  btn.classList.toggle('paused');
  if (scrolling) scrollStep();
});
<\/script></body></html>`;

  function escapeStr(str) {
    return str.replace(/\\/g, '\\\\').replace(/"/g, '\\"');
  }

  function generateAndDownload() {
    document.getElementById('generation-message').style.display = 'block';

    const rawText = document.getElementById('inputText').value;
    const lines = rawText.split('\n');
    let scriptJson = "";

    lines.forEach(line => {
      line = line.trim();
      if (!line) return;
      if (line.startsWith('#')) {
        scriptJson += `{ type: "title", content: "${escapeStr(line.slice(1).trim())}" },\n`;
      } else if (line.startsWith('*')) {
        scriptJson += `{ type: "instruction", content: "${escapeStr(line.slice(1).trim())}" },\n`;
      } else {
        scriptJson += `{ type: "text", content: "${escapeStr(line)}" },\n`;
      }
    });

    const fullHtml = htmlTop + scriptJson + htmlBottom;

    const blob = new Blob([fullHtml], { type: 'text/html' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    const date = new Date();
    const dateStr = date.toISOString().slice(0,16).replace(/:/g, '').replace('T','_');
    link.download = `teleprompter-${dateStr}.html`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    setTimeout(() => {
      document.getElementById('generation-message').style.display = 'none';
    }, 3000);
  }
</script>
</body>
</html>